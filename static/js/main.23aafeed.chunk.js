(this["webpackJsonpboo-boo"]=this["webpackJsonpboo-boo"]||[]).push([[0],[,,,,,function(e,t,a){e.exports={mainWrapper:"mainStylesForPages_mainWrapper__3mWTf",header:"mainStylesForPages_header__2L5tl",main:"mainStylesForPages_main__2lAMh",formBox:"mainStylesForPages_formBox__26AGZ",title:"mainStylesForPages_title__2Vs5s",form:"mainStylesForPages_form__15MAZ",button:"mainStylesForPages_button__1zZ-w",footerParagraph:"mainStylesForPages_footerParagraph__vavVR",footerLink:"mainStylesForPages_footerLink__3_n8F",errorMessage:"mainStylesForPages_errorMessage__2CUpC"}},,,,,,,,function(e,t,a){e.exports={addTask:"AddTask_addTask__2Ugjm",main:"AddTask_main__1bUQA",shallow:"AddTask_shallow__3pa2z",plus:"AddTask_plus__2lw5V",text:"AddTask_text__2_gNQ",overlay:"AddTask_overlay__oXkVy",header:"AddTask_header__1wYDu",title:"AddTask_title__2E6ow",cancelX:"AddTask_cancelX__2D_fA",content:"AddTask_content__uA7ee",buttonCancel:"AddTask_buttonCancel__1XUXG",project:"AddTask_project__1r-PM",date:"AddTask_date__1tPWl",taskDateOverlay:"AddTask_taskDateOverlay__1SLjF",taskProjectOverlay:"AddTask_taskProjectOverlay__1ybxY"}},,,,,,,,function(e,t,a){e.exports={sidebar:"Sidebar_sidebar__3cG75",middle:"Sidebar_middle__N1k6s",iconChevron:"Sidebar_iconChevron__3Ds2I",hiddenProject:"Sidebar_hiddenProject__jDQIo",generic:"Sidebar_generic__3puY9",taskCounterContainer:"Sidebar_taskCounterContainer__3s1Zr",active:"Sidebar_active__2p_6l",projects:"Sidebar_projects__NV7FY"}},,,function(e,t,a){e.exports={homePageBody:"HomePage_homePageBody__1soNb",header:"HomePage_header__ae_0k",navList:"HomePage_navList__2VpEI",navListUl:"HomePage_navListUl__QrhXn",navListElement:"HomePage_navListElement__2cQFc",navListElement__mainColored:"HomePage_navListElement__mainColored__2yK9w",headerTitle:"HomePage_headerTitle__24we4",getStartedContainer:"HomePage_getStartedContainer__2U2sO",getStarted:"HomePage_getStarted__3kN_G",manImage:"HomePage_manImage__2E1QB"}},,function(e,t,a){e.exports={header:"Header_header__1kC_1",headerBtn:"Header_headerBtn__1FQ94",navigation:"Header_navigation__1F-n-",burger:"Header_burger__2igPP",settings:"Header_settings__2Fx6A",settingsItem:"Header_settingsItem__1Exfk"}},function(e,t,a){e.exports={taskDate:"TaskDate_taskDate__3kxT4",list:"TaskDate_list__2aUbJ",listItem:"TaskDate_listItem__1RylB",listItemElement:"TaskDate_listItemElement__21kk0"}},,function(e,t,a){e.exports={project:"IndividualProject_project__2egx8",active:"IndividualProject_active__2AD-w",projectAction:"IndividualProject_projectAction__xnBbi",projectItem:"IndividualProject_projectItem__bZeOC",dot:"IndividualProject_dot__2Yp4I",delete:"IndividualProject_delete__24kxa",deleteModal:"IndividualProject_deleteModal__1ec4X"}},function(e,t,a){e.exports={addProject:"AddProject_addProject__4r_sS",wrapper:"AddProject_wrapper__3tKyv",plus:"AddProject_plus__3VQvq",text:"AddProject_text__3EbNs",input:"AddProject_input__3VuJo",name:"AddProject_name__2L3qv",buttons:"AddProject_buttons__g7v2e"}},,,,,,function(e,t,a){e.exports={projectOverlay:"ProjectOverlay_projectOverlay__1F7Py",overlayList:"ProjectOverlay_overlayList__3QaBQ",listItem:"ProjectOverlay_listItem__3IjJM"}},function(e,t,a){e.exports={taskBody:"Task_taskBody__Vbd0B",name:"Task_name__2X5qg",kebab:"Task_kebab__3ioTP",modal:"Task_modal___ObYf"}},,,,function(e,t,a){e.exports={modal:"SmallModalWindow_modal__S1KqR",title:"SmallModalWindow_title__4mvRU",buttons:"SmallModalWindow_buttons__1AH4-"}},function(e,t,a){e.exports={checkboxHolder:"Checkbox_checkboxHolder__2PH8Y",checkbox:"Checkbox_checkbox__1JiEP",checkboxChecked:"Checkbox_checkboxChecked__1sgu1"}},,,,,,function(e,t,a){e.exports={mainBtn:"Button_mainBtn__1tTlS",primary:"Button_primary__3kWYq",transparent:"Button_transparent__12jVQ"}},,,,,function(e,t,a){e.exports={wrapper:"SignIn_wrapper__1wYbs"}},function(e,t,a){e.exports={logo:"Logo_logo__32NGX"}},function(e,t,a){e.exports={wrapper:"SignUp_wrapper__TMV63"}},function(e,t,a){e.exports={content:"Content_content__1r29_"}},function(e,t,a){e.exports={counter:"TaskCounter_counter__3mcJc"}},,,,,,,,,,,,function(e,t,a){},,,,,,,,,function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(2),c=a.n(n),s=a(39),r=a.n(s),o=a(8),i=(a(69),a(70),a(16)),d=a(10),l=a(12),j=a(4),u=a(40),b=a(53),O=a.n(b),m=a(5),h=a.n(m),x="/boo-boo",p="/app",_="/signup",f="/signin",v=a(54),k=a.n(v),y=a.p+"static/media/logo.f91ee324.svg",g=a(1),N=function(){return Object(g.jsx)(i.b,{to:x,"data-testid":"logo",children:Object(g.jsx)("img",{className:k.a.logo,src:y,alt:"Boo-Boo logo",height:"28",width:"120"})})},I=a(9),S=a.n(I),w=a(20),P=a(3),T=Object(P.createSlice)({name:"auth",initialState:{user:{userId:"",userEmail:"",userName:""}},reducers:{setAuthUser:function(e,t){e.user=t.payload}}}),C=T.actions.setAuthUser,A=T.reducer,D=function(){return function(){var e=Object(w.a)(S.a.mark((function e(t){var a,n,c,s,r,o;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"string"===typeof(a=localStorage.getItem("authUser"))&&a.length>0&&(n=JSON.parse(a),c=n.id,s=n.email,r=void 0===s?"":s,o=n.name,t(C({userId:c,userEmail:r,userName:void 0===o?"":o})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},E=a(31),B="https://boo-boo-server.herokuapp.com/api/";function M(e){e.set("Access-Control-Allow-Origin","*");var t=JSON.parse(localStorage.getItem("authUser")||"");return t&&e.set("authorization","Bearer ".concat(null===t||void 0===t?void 0:t.accessToken)),e}var Y=Object(E.createApi)({reducerPath:"authAPI",baseQuery:Object(E.fetchBaseQuery)({baseUrl:B}),endpoints:function(e){return{logOut:e.mutation({query:function(e){return{url:"/auth/logout/",method:"POST",body:e}}}),signIn:e.mutation({query:function(e){return{url:"/auth/login/",method:"POST",body:{login:e.login,password:e.password}}}}),signUp:e.mutation({query:function(e){return{url:"/auth/registration/",method:"POST",body:{login:e.login,password:e.password}}}})}}}),L=Object(E.createApi)({reducerPath:"projectsAPI",baseQuery:Object(E.fetchBaseQuery)({baseUrl:B,prepareHeaders:M}),endpoints:function(e){return{getAllProjectsById:e.query({query:function(){return{url:"/project/byUser"}}}),deleteProject:e.mutation({query:function(e){return{url:"/project/".concat(e),method:"DELETE"}}}),addProject:e.mutation({query:function(e){return{url:"/project/create",method:"POST",body:e}}})}}}),U=Object(E.createApi)({reducerPath:"tasksAPI",baseQuery:Object(E.fetchBaseQuery)({baseUrl:B,prepareHeaders:M}),endpoints:function(e){return{getAllTasksById:e.query({query:function(){return{url:"/task/byUser"}}}),addTask:e.mutation({query:function(e){return{url:"/task/create",method:"POST",body:e}}}),updateTaskById:e.mutation({query:function(e){var t=e.taskId,a=e.task;return{url:"/task/".concat(t),method:"PATCH",body:a}}}),deleteTask:e.mutation({query:function(e){return{url:"/task/".concat(e),method:"DELETE"}}})}}}),Q=function(){return Object(g.jsx)("header",{className:h.a.header,"data-testid":"header",children:Object(g.jsx)(N,{})})},q=function(){var e=Object(u.a)(),t=e.register,a=e.handleSubmit,c=e.formState.errors,s=Y.useSignInMutation(),r=Object(j.a)(s,1)[0],d=Object(o.useDispatch)(),b=Object(n.useCallback)((function(e){var t=e.email,a=e.password;return r({login:t,password:a}).then((function(e){localStorage.setItem("authUser",JSON.stringify(e.data)),d(D())}))}),[d]);return Object(n.useEffect)((function(){document.title="BOO\u2014BOO: Sign In"})),Object(g.jsx)("div",{className:h.a.mainWrapper,children:Object(g.jsxs)("div",{className:O.a.wrapper,children:[Object(g.jsx)(Q,{}),Object(g.jsx)("div",{className:h.a.main,children:Object(g.jsxs)("div",{className:h.a.formBox,children:[Object(g.jsx)("h3",{className:h.a.title,children:"Sign In"}),Object(g.jsxs)("form",{className:h.a.form,onSubmit:a(b),children:[Object(g.jsxs)("label",{className:h.a.label,children:["Email",Object(g.jsx)("input",Object(l.a)({type:"text",placeholder:"Email"},t("email",{pattern:{value:/^\S+@\S+$/i,message:"Incorrect email"},required:"This input is required."})))]}),Object(g.jsx)("div",{children:(null===c||void 0===c?void 0:c.email)&&Object(g.jsx)("p",{className:h.a.errorMessage,children:null===c||void 0===c?void 0:c.email.message})}),Object(g.jsxs)("label",{className:h.a.label,children:["Password",Object(g.jsx)("input",Object(l.a)({type:"password",placeholder:"Password"},t("password",{required:"This input is required."})))]}),Object(g.jsx)("div",{children:(null===c||void 0===c?void 0:c.password)&&Object(g.jsx)("p",{className:h.a.errorMessage,children:null===c||void 0===c?void 0:c.password.message})}),Object(g.jsx)("input",{className:h.a.button,"data-testid":"sign-in",value:"Sign In",type:"submit"})]}),Object(g.jsxs)("p",{className:h.a.footerParagraph,children:["Don't have an account yet?",Object(g.jsx)(i.b,{className:h.a.footerLink,to:_,children:"Sign up now"})]})]})})]})})},F=a(55),H=a.n(F),K=function(){var e=Object(u.a)(),t=e.register,a=e.handleSubmit,c=e.formState.errors,s=Object(o.useDispatch)(),r=Y.useSignUpMutation(),d=Object(j.a)(r,1)[0],b=Object(n.useCallback)((function(e){var t=e.email,a=e.password;return d({login:t,password:a}).then((function(e){localStorage.setItem("authUser",JSON.stringify(e.data)),s(D())}))}),[s]);return console.log("SignUp errors: ",c),Object(n.useEffect)((function(){document.title="BOO\u2014BOO: SignUp"})),Object(g.jsx)("div",{className:h.a.mainWrapper,children:Object(g.jsxs)("div",{className:H.a.wrapper,children:[Object(g.jsx)(Q,{}),Object(g.jsx)("div",{className:h.a.main,children:Object(g.jsxs)("div",{className:h.a.formBox,children:[Object(g.jsx)("h3",{className:h.a.title,children:"Sign Up"}),Object(g.jsxs)("form",{className:h.a.form,onSubmit:a(b),children:[Object(g.jsxs)("label",{className:h.a.label,children:["Email",Object(g.jsx)("input",Object(l.a)({type:"text",placeholder:"Email"},t("email",{pattern:{value:/^\S+@\S+$/i,message:"Incorrect email"},required:"This input is required."})))]}),Object(g.jsx)("div",{children:(null===c||void 0===c?void 0:c.email)&&Object(g.jsx)("p",{className:h.a.errorMessage,children:null===c||void 0===c?void 0:c.email.message})}),Object(g.jsxs)("label",{className:h.a.label,children:["Password",Object(g.jsx)("input",Object(l.a)({type:"password",placeholder:"Password"},t("password",{minLength:{value:6,message:"Password length should exceed 6 characters"},required:"This input is required."})))]}),Object(g.jsx)("div",{children:(null===c||void 0===c?void 0:c.password)&&Object(g.jsx)("p",{className:h.a.errorMessage,children:null===c||void 0===c?void 0:c.password.message})}),Object(g.jsx)("button",{className:h.a.button,"data-testid":"sign-up",type:"submit",children:"Sign Up"})]}),Object(g.jsxs)("p",{className:h.a.footerParagraph,children:["Already have an account?",Object(g.jsx)(i.b,{className:h.a.footerLink,to:f,children:"Sign in now"})]})]})})]})})},X=a(49),G=function(e){return e.userId&&e.userId.length>0};function J(e){var t=e.user,a=e.loggedInPath,n=e.children,c=Object(X.a)(e,["user","loggedInPath","children"]);return Object(g.jsx)(d.b,Object(l.a)(Object(l.a)({},c),{},{render:function(){return G(t)?Object(g.jsx)(d.a,{to:{pathname:a}}):G(t)?null:n}}))}function V(e){var t=e.user,a=e.children,n=Object(X.a)(e,["user","children"]);return Object(g.jsx)(d.b,Object(l.a)(Object(l.a)({},n),{},{render:function(e){var n=e.location;return G(t)?a:G(t)?null:Object(g.jsx)(d.a,{to:{pathname:f,state:{from:n}}})}}))}var W,R=a(24),Z=a.n(R),z=function(){return Object(n.useEffect)((function(){document.title="BOO\u2014BOO: Home"})),Object(g.jsx)("div",{className:h.a.mainWrapper,"data-testid":"home-page",children:Object(g.jsxs)("div",{className:Z.a.homePageBody,children:[Object(g.jsxs)("header",{className:Z.a.header,children:[Object(g.jsx)(N,{}),Object(g.jsx)("nav",{className:Z.a.navList,children:Object(g.jsxs)("ul",{className:Z.a.navListUl,children:[Object(g.jsx)("li",{className:Z.a.navListElement,children:Object(g.jsx)(i.b,{to:f,children:"Sign In"})}),Object(g.jsx)("li",{className:"".concat(Z.a.navListElement," ").concat(Z.a.navListElement__mainColored),children:Object(g.jsx)(i.b,{to:_,children:"Sign Up"})})]})})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{className:Z.a.headerTitle,children:"Keep an eye\n on your tasks."}),Object(g.jsx)("div",{className:Z.a.getStartedContainer,children:Object(g.jsx)(i.b,{className:Z.a.getStarted,to:f,children:"Get started"})})]}),Object(g.jsx)("div",{className:Z.a.manImage})]})})},$=a(11),ee=a(26),te=a.n(ee),ae=a(22),ne=a(25),ce=a.n(ne),se=a(13),re=a.n(se),oe=a(36),ie=a.n(oe),de=function(e){var t=e.setProject,a=e.showProjectOverlay,n=e.setShowProjectOverlay,c=L.useGetAllProjectsByIdQuery("").data;return Object(g.jsx)(g.Fragment,{children:c&&a&&Object(g.jsx)("div",{className:ie.a.projectOverlay,"data-testid":"project-overlay",children:Object(g.jsx)("ul",{className:ie.a.overlayList,children:c.map((function(e){return Object(g.jsx)("li",{className:ie.a.listItem,children:Object(g.jsx)("div",{className:ie.a.listElement,"data-testid":"project-overlay-action",onClick:function(){t(e.id),n(!1)},onKeyDown:function(a){"Enter"===a.key&&(t(e.id),n(!1))},role:"button",tabIndex:0,"aria-label":"Select the task project",children:e.name})},e.id)}))})})})},le=a(27),je=a.n(le),ue=function(e){var t=e.setShowTaskDate,a=e.setTaskDate,n=e.showTaskDate;return Object(g.jsx)(g.Fragment,{children:n&&Object(g.jsx)("div",{className:je.a.taskDate,"data-testid":"task-date-overlay",children:Object(g.jsxs)("ul",{className:je.a.list,children:[Object(g.jsx)("li",{className:je.a.listItem,children:Object(g.jsxs)("div",{className:je.a.listItemElement,"aria-label":"Select today as the task date",onClick:function(){t(!1),a(ce()().format("DD/MM/YYYY"))},onKeyDown:function(e){"Enter"===e.key&&(t(!1),a(ce()().format("DD/MM/YYYY")))},role:"button","data-testid":"task-date-today",tabIndex:0,children:[Object(g.jsx)("span",{children:Object(g.jsx)(ae.g,{})}),Object(g.jsx)("span",{children:"Today"})]})}),Object(g.jsx)("li",{className:je.a.listItem,children:Object(g.jsxs)("div",{className:je.a.listItemElement,"aria-label":"Select tomorrow as the task date",onClick:function(){t(!1),a(ce()().add(1,"day").format("DD/MM/YYYY"))},onKeyDown:function(e){"Enter"===e.key&&(t(!1),a(ce()().add(1,"day").format("DD/MM/YYYY")))},role:"button",tabIndex:0,"data-testid":"task-date-tomorrow",children:[Object(g.jsx)("span",{children:Object(g.jsx)(ae.h,{})}),Object(g.jsx)("span",{children:"Tomorrow"})]})}),Object(g.jsx)("li",{className:je.a.listItem,children:Object(g.jsxs)("div",{className:je.a.listItemElement,"aria-label":"Select next week as the task date",onClick:function(){t(!1),a(ce()().add(7,"day").format("DD/MM/YYYY"))},onKeyDown:function(e){"Enter"===e.key&&(t(!1),a(ce()().add(7,"day").format("DD/MM/YYYY")))},role:"button",tabIndex:0,"data-testid":"task-date-next-week",children:[Object(g.jsx)("span",{children:Object(g.jsx)(ae.e,{})}),Object(g.jsx)("span",{children:"Next week"})]})})]})})})},be=a(48),Oe=a.n(be),me=function(e){var t=e.onClick,a=e.label,n=e.dataTestId,c=e.color;return Object(g.jsx)("button",{className:"".concat(Oe.a.mainBtn," ").concat(Oe.a[c]),type:"button",onClick:function(){return t()},"data-testid":n,children:a})},he=function(e){return e.projects.activeProject},xe=function(e){var t=e.showAddTaskMain,a=void 0===t||t,c=e.showShouldMain,s=void 0!==c&&c,r=e.showQuickAddTask,i=void 0!==r&&r,d=e.setShowQuickAddTask,l=Object(n.useState)(""),u=Object(j.a)(l,2),b=u[0],O=u[1],m=Object(n.useState)(""),h=Object(j.a)(m,2),x=h[0],p=h[1],_=Object(n.useState)(""),f=Object(j.a)(_,2),v=f[0],k=f[1],y=Object(n.useState)(s),N=Object(j.a)(y,2),I=N[0],S=N[1],w=Object(n.useState)(!1),P=Object(j.a)(w,2),T=P[0],C=P[1],A=Object(n.useState)(!1),D=Object(j.a)(A,2),E=D[0],B=D[1],M=Object(o.useSelector)((function(e){return he(e)})),Y=U.useAddTaskMutation(),L=Object(j.a)(Y,2),Q=L[0],q=L[1],F=q.data,H=q.isLoading,K=U.useGetAllTasksByIdQuery("").refetch,X=function(){var e=v||M,t="";return"TODAY"===e?t=ce()().format("DD/MM/YYYY"):"NEXT_7"===e&&(t=ce()().add(7,"day").format("DD/MM/YYYY")),b&&e&&Q({name:b,description:"",date:t||x,archived:!1,projectId:e})};return Object(n.useEffect)((function(){!H&&F&&K()}),[H,F]),Object(g.jsxs)("div",{className:i?re.a.overlay:re.a.addTask,"data-testid":"add-task-comp",children:[a&&!I&&Object(g.jsxs)("div",{className:re.a.shallow,"data-testid":"show-main-action",onClick:function(){return S(!I)},onKeyDown:function(e){"Enter"===e.key&&S(!I)},tabIndex:0,"aria-label":"Add task",role:"button",children:[Object(g.jsx)("span",{className:re.a.plus,children:Object(g.jsx)($.a,{})}),Object(g.jsx)("span",{className:re.a.text,children:"Add Task"})]}),(I||i)&&Object(g.jsxs)("div",{className:re.a.main,"data-testid":"add-task-main",children:[void 0!==i&&void 0!==d&&Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("div",{"data-testid":"quick-add-task",children:[Object(g.jsx)("h2",{className:re.a.title,children:"Quick Add Task"}),Object(g.jsx)("span",{className:re.a.cancelX,"data-testid":"add-task-quick-cancel","aria-label":"Cancel adding task",onClick:function(){O(""),S(!1),C(!1),d(!1)},onKeyDown:function(e){"Enter"===e.key&&(O(""),S(!1),C(!1),d(!1))},tabIndex:0,role:"button",children:Object(g.jsx)(ae.f,{})})]})}),Object(g.jsx)("div",{className:re.a.taskProjectOverlay,children:Object(g.jsx)(de,{setProject:k,showProjectOverlay:T,setShowProjectOverlay:C})}),Object(g.jsx)("div",{className:re.a.taskDateOverlay,children:Object(g.jsx)(ue,{setTaskDate:p,showTaskDate:E,setShowTaskDate:B})}),Object(g.jsx)("input",{className:re.a.content,"aria-label":"Enter your task","data-testid":"add-task-content",type:"text",value:b,onChange:function(e){return O(e.target.value)}}),Object(g.jsx)(me,{onClick:function(){return O(""),k(""),S(!1),C(!1),i&&d?X()&&d(!1):X()},label:"Add Task",color:"primary",dataTestId:"add-task"}),!i&&Object(g.jsx)("span",{className:re.a.buttonCancel,children:Object(g.jsx)(me,{onClick:function(){O(""),S(!1),C(!1)},label:"Cancel",color:"transparent",dataTestId:"add-task-main-cancel"})}),Object(g.jsx)("span",{className:re.a.project,"data-testid":"show-project-overlay",onClick:function(){return C(!T)},onKeyDown:function(e){"Enter"===e.key&&C(!T)},tabIndex:0,role:"button",children:Object(g.jsx)(ae.d,{})}),Object(g.jsx)("span",{className:re.a.date,"data-testid":"show-task-date-overlay",onClick:function(){return B(!E)},onKeyDown:function(e){"Enter"===e.key&&B(!E)},tabIndex:0,role:"button",children:Object(g.jsx)(ae.c,{})})]})]})},pe=function(){var e=Object(n.useState)(!1),t=Object(j.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(!1),r=Object(j.a)(s,2),i=r[0],d=r[1],l=Object(o.useDispatch)(),u=Y.useLogOutMutation(),b=Object(j.a)(u,1)[0],O=Object(n.useCallback)((function(){var e=localStorage.getItem("authUser");if("string"===typeof e&&e.length>0){var t=JSON.parse(e);b(t.refreshToken).then((function(e){var t;e&&(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.success)&&(l(C({userId:"",userEmail:"",userName:""})),localStorage.removeItem("authUser"))}))}}),[]);return Object(g.jsxs)("header",{className:te.a.header,"data-testid":"header",children:[Object(g.jsxs)("nav",{className:te.a.navigation,children:[Object(g.jsx)("div",{className:te.a.burger,"aria-label":"Close/Open sidebar",children:Object(g.jsx)("button",{className:te.a.headerBtn,"data-testid":"Close/Open sidebar",type:"button",children:Object(g.jsx)($.d,{})})}),Object(g.jsx)("div",{className:te.a.settings,children:Object(g.jsxs)("ul",{children:[Object(g.jsx)("li",{"aria-label":"Quick add task",className:te.a.settingsItem,children:Object(g.jsx)("button",{type:"button","data-testid":"quick-add-task-action",className:te.a.headerBtn,onClick:function(){d(!0),c(!0)},children:Object(g.jsx)($.a,{})})}),Object(g.jsx)("li",{"aria-label":"Sign out",className:te.a.settingsItem,children:Object(g.jsx)("button",{type:"button",className:te.a.headerBtn,"data-testid":"sign-out",onClick:O,children:Object(g.jsx)($.f,{})})})]})})]}),Object(g.jsx)(xe,{showAddTaskMain:!1,showShouldMain:a,showQuickAddTask:i,setShowQuickAddTask:d})]})},_e=a(56),fe=a.n(_e),ve=a(21),ke=a.n(ve),ye=a(80),ge=a(29),Ne=a.n(ge),Ie="INBOX",Se="TODAY",we="NEXT_7",Pe={activeProject:Ie},Te=Object(P.createSlice)({name:"projects",initialState:Pe,reducers:{setActiveProject:function(e,t){e.activeProject=t.payload}}}),Ce=Te.actions.setActiveProject,Ae=Te.reducer,De=a(41),Ee=a.n(De),Be=function(e){var t=e.description,a=e.deleteTask,n=e.onClose;return Object(g.jsxs)("div",{className:Ee.a.modal,"data-testid":"small-modal-window",children:[Object(g.jsx)("p",{className:Ee.a.title,children:t}),Object(g.jsxs)("div",{className:Ee.a.buttons,children:[Object(g.jsx)(me,{onClick:function(){a()},label:"Delete",color:"primary",dataTestId:"small-modal-window-delete"}),Object(g.jsx)(me,{onClick:function(){return n()},label:"Cancel",color:"transparent",dataTestId:"small-modal-window-cancel"})]})]})},Me=function(e){var t=e.project,a=e.refetch,c=Object(n.useState)(!1),s=Object(j.a)(c,2),r=s[0],i=s[1],d=Object(n.useRef)(null),l=Object(o.useSelector)((function(e){return he(e)})),u=Object(o.useDispatch)(),b=Object(n.useCallback)((function(e){return u(Ce(e))}),[u]),O=L.useDeleteProjectMutation(),m=Object(j.a)(O,2),h=m[0],x=m[1],p=x.data,_=x.isLoading,f=function(){i(!r)};return function(e,t,a){var c=Object(n.useCallback)((function(t){e.current&&!e.current.contains(t.target)&&a()}),[a,e]);Object(n.useEffect)((function(){return t?document.addEventListener("mousedown",c):document.removeEventListener("mousedown",c),function(){document.removeEventListener("mousedown",c)}}),[t,c])}(d,r,f),Object(n.useEffect)((function(){!_&&p&&p.success&&a()}),[p,_]),Object(g.jsx)(g.Fragment,{children:Object(g.jsx)("li",{className:"".concat(Ne.a.project," ").concat(l===t.id?Ne.a.active:""),"data-testid":"project-action-parent",children:Object(g.jsxs)("div",{className:Ne.a.projectAction,children:[Object(g.jsxs)("div",{className:Ne.a.projectItem,"data-testid":"project-action","aria-label":"Select ".concat(t.name," as the task project"),role:"button",tabIndex:0,onClick:function(){b(t.id)},onKeyDown:function(e){"Enter"===e.key&&b(t.id)},children:[Object(g.jsx)("span",{className:Ne.a.dot,children:"\u2022"}),Object(g.jsx)("span",{children:t.name})]}),Object(g.jsxs)("div",{className:Ne.a.delete,"data-testid":"delete-project",onClick:function(){return f()},onKeyDown:function(e){"Enter"===e.key&&f()},tabIndex:0,role:"button","aria-label":"Confirm deletion of project",children:[Object(g.jsx)($.e,{}),r&&Object(g.jsx)("div",{className:Ne.a.deleteModal,ref:d,children:Object(g.jsx)(Be,{description:"Are you sure you want to delete this project?",deleteTask:function(){h(t.id),b(Ie)},onClose:function(){return i(!1)}})})]})]})},t.id)})},Ye=function(){var e=L.useGetAllProjectsByIdQuery(""),t=e.data,a=e.refetch;return Object(g.jsx)("div",{"data-testid":"all-projects",children:t&&t.map((function(e){return Object(g.jsx)(Me,{project:e,refetch:a},Object(ye.a)())}))})},Le=a(30),Ue=a.n(Le),Qe=function(e){var t=e.shouldShow,a=void 0!==t&&t,c=Object(n.useState)(a),s=Object(j.a)(c,2),r=s[0],o=s[1],i=Object(n.useState)({name:"",description:"",id:""}),d=Object(j.a)(i,2),u=d[0],b=d[1],O=L.useGetAllProjectsByIdQuery("").refetch,m=L.useAddProjectMutation(),h=Object(j.a)(m,2),x=h[0],p=h[1],_=p.data,f=p.isLoading;return Object(n.useEffect)((function(){!f&&_&&O()}),[_,f]),Object(g.jsxs)("div",{className:Ue.a.wrapper,"data-testid":"add-project",children:[!r&&Object(g.jsxs)("div",{className:Ue.a.addProject,"aria-label":"Add Project","data-testid":"add-project-action",onClick:function(){return o(!0)},onKeyDown:function(e){"Enter"===e.key&&o(!0)},role:"button",tabIndex:0,children:[Object(g.jsx)("span",{className:Ue.a.plus,children:Object(g.jsx)($.a,{})}),Object(g.jsx)("span",{className:Ue.a.text,children:"Add Project"})]}),r&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{className:Ue.a.input,"data-testid":"add-project-inner",children:Object(g.jsx)("input",{value:u.name,onChange:function(e){return b(Object(l.a)(Object(l.a)({},u),{},{name:e.target.value}))},className:Ue.a.name,"data-testid":"project-name",type:"text",placeholder:"Name your project"})}),Object(g.jsxs)("div",{className:Ue.a.buttons,children:[Object(g.jsx)(me,{color:"primary",label:"Add Project",onClick:function(){return x(u),b(Object(l.a)(Object(l.a)({},u),{},{name:""})),void o(!1)},dataTestId:"add-project-submit"}),Object(g.jsx)(me,{color:"transparent",label:"Cancel",onClick:function(){return o(!1)},dataTestId:"hide-project-overlay"})]})]})]})},qe=a(57),Fe=a.n(qe),He=function(e){var t=e.count;return Object(g.jsx)(g.Fragment,{children:t>0&&Object(g.jsx)("span",{"data-testid":"task-counter",className:Fe.a.counter,children:t})})},Ke=function(e){var t=e.userId,a=Object(n.useState)(!0),c=Object(j.a)(a,2),s=c[0],r=c[1],i=Object(o.useDispatch)(),d=Object(n.useCallback)((function(e){return i(Ce(e))}),[i]),l=U.useGetAllTasksByIdQuery("").data,u=(null===l||void 0===l?void 0:l.filter((function(e){return e.projectId===Ie})).length)||0,b=(null===l||void 0===l?void 0:l.filter((function(e){return e.projectId===Se})).length)||0,O=(null===l||void 0===l?void 0:l.filter((function(e){return e.projectId===we})).length)||0,m=Object(o.useSelector)((function(e){return he(e)}));return Object(g.jsxs)("div",{className:ke.a.sidebar,"data-testid":"sidebar",children:[Object(g.jsxs)("ul",{className:ke.a.generic,children:[Object(g.jsx)("li",{"data-testid":"inbox",className:m===Ie?ke.a.active:"",children:Object(g.jsxs)("div",{"aria-label":"Show inbox tasks","data-testid":"inbox-action",onClick:function(){d(Ie)},onKeyDown:function(e){"Enter"===e.key&&d(Ie)},role:"button",tabIndex:0,children:[Object(g.jsx)("span",{children:Object(g.jsx)(ae.a,{})}),Object(g.jsx)("span",{children:"Inbox"}),Object(g.jsx)("span",{className:ke.a.taskCounterContainer,children:Object(g.jsx)(He,{count:u})})]})}),Object(g.jsx)("li",{"data-testid":"today",className:m===Se?ke.a.active:"",children:Object(g.jsx)("div",{"aria-label":"Show today`s tasks","data-testid":"today-action",onClick:function(){d(Se)},onKeyDown:function(e){"Enter"===e.key&&d(Se)},role:"button",tabIndex:0,children:Object(g.jsxs)("span",{children:[Object(g.jsx)("span",{children:Object(g.jsx)(ae.b,{})}),Object(g.jsx)("span",{children:"Today"}),Object(g.jsx)("span",{className:ke.a.taskCounterContainer,children:Object(g.jsx)(He,{count:b})})]})})}),Object(g.jsx)("li",{"data-testid":"next_7",className:m===we?ke.a.active:"",children:Object(g.jsxs)("div",{"aria-label":"Show tasks for the next 7 days","data-testid":"next_7-action",onClick:function(){d(we)},onKeyDown:function(e){"Enter"===e.key&&d(we)},role:"button",tabIndex:0,children:[Object(g.jsx)("span",{children:Object(g.jsx)(ae.c,{})}),Object(g.jsx)("span",{children:"Next 7 days"}),Object(g.jsx)("span",{className:ke.a.taskCounterContainer,children:Object(g.jsx)(He,{count:O})})]})})]}),Object(g.jsxs)("div",{className:ke.a.middle,onClick:function(){return r(!s)},onKeyDown:function(e){"Enter"===e.key&&r(!s)},"aria-label":"".concat(s?"Hide":"Show"," projects"),role:"button",tabIndex:0,children:[Object(g.jsx)("span",{className:ke.a.iconChevron,children:Object(g.jsx)($.c,{className:s?"":ke.a.hiddenProject})}),Object(g.jsx)("h2",{children:"Projects"})]}),Object(g.jsx)("ul",{className:ke.a.projects,children:s&&Object(g.jsx)(Ye,{})}),s&&Object(g.jsx)(Qe,{userId:t})]})},Xe=(a(78),[{key:"INBOX",name:"Inbox"},{key:"TODAY",name:"Today"},{key:"NEXT_7",name:"Next 7 Days"}]),Ge=function(e){return Xe.find((function(t){return t.key===e}))},Je=a(37),Ve=a.n(Je),We=a(42),Re=a.n(We),Ze=function(e){var t=e.name,a=e.archiveTask,c=Object(n.useState)(!1),s=Object(j.a)(c,2),r=s[0],o=s[1],i=Object(n.useState)(!1),d=Object(j.a)(i,2),l=d[0],u=d[1],b=function(){u(!0),setTimeout((function(){return a()}),300)};return Object(g.jsx)("div",{className:Re.a.checkboxHolder,"data-testid":"checkbox-action",onClick:function(){return b()},onKeyDown:function(e){"Enter"===e.key&&b()},"aria-label":"Mark ".concat(t," as done?"),role:"button",tabIndex:0,children:Object(g.jsx)("span",{className:"".concat(Re.a.checkbox," ").concat(l&&Re.a.checkboxChecked),"data-testid":"checkbox-circle",onMouseEnter:function(){return o(!0)},onMouseOver:function(){return o(!0)},onMouseLeave:function(){return o(!1)},children:(r||l)&&Object(g.jsx)("span",{"data-testid":"checkbox-icon",children:Object(g.jsx)($.b,{})})})})},ze=function(e){var t=e.id,a=e.name,c=e.description,s=e.archived,r=e.date,o=e.projectId,i=e.refetch,d=Object(n.useState)(!1),l=Object(j.a)(d,2),u=l[0],b=l[1],O=U.useDeleteTaskMutation(),m=Object(j.a)(O,2),h=m[0],x=m[1],p=x.isLoading,_=x.data,f=U.useUpdateTaskByIdMutation(),v=Object(j.a)(f,2),k=v[0],y=v[1],N=y.isLoading,I=y.data,S=Object(n.useCallback)((function(){return k({taskId:t,task:{name:a,description:c,archived:!0,date:r,projectId:o}})}),[t,a,c,s,r,o]);return Object(n.useEffect)((function(){!N&&I&&i()}),[N,I]),Object(n.useEffect)((function(){!p&&_&&_.success&&i()}),[p,_]),Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("li",{"data-testid":"task",children:[Object(g.jsxs)("div",{className:Ve.a.taskBody,children:[Object(g.jsx)(Ze,{name:a,archiveTask:S}),Object(g.jsx)("span",{className:Ve.a.name,children:a})]}),Object(g.jsxs)("div",{className:Ve.a.kebab,"data-testid":"task-kebab",role:"button",tabIndex:0,"aria-label":"".concat(u?"Close":"Open",' delete task "').concat(a,'" modal?'),onClick:function(){return b(!u)},onKeyDown:function(e){"Enter"===e.key&&b(!u)},children:[Object(g.jsx)($.e,{}),u&&Object(g.jsx)("div",{className:Ve.a.modal,children:Object(g.jsx)(Be,{description:"Are you sure you want to delete this task?",deleteTask:function(){return h(t)},onClose:function(){return b(!1)}})})]})]})})},$e=function(){var e=Object(n.useState)([]),t=Object(j.a)(e,2),a=t[0],c=t[1],s=Object(o.useSelector)((function(e){return he(e)})),r=L.useGetAllProjectsByIdQuery("").data,i=U.useGetAllTasksByIdQuery(""),d=i.data,l=i.refetch,u=function(){var e="";return r&&r.length>0&&s&&!Ge(s)&&(e=function(e,t){var a=e.find((function(e){return e.id===t}));return void 0!==a?a.name:""}(r,s)),Ge(s)&&s&&(e=function(e,t){var a=e.find((function(e){return e.key===t}));return void 0!==a?a.name:""}(Xe,s)),e}();return Object(n.useEffect)((function(){document.title="BOO\u2014BOO: ".concat(u," tasks")}),[u]),Object(n.useEffect)((function(){if(d){var e=(t=s,d.filter((function(e){return e.projectId===t&&!e.archived})));c(e)}var t}),[d,s]),Object(g.jsxs)("div",{className:"tasks","data-testid":"tasks",children:[Object(g.jsx)("h2",{"data-testid":"project-name",children:u}),d&&a.length>0&&Object(g.jsx)("ul",{className:"tasks__list",children:a.map((function(e){return Object(g.jsx)(ze,{id:e.id,name:e.name,archived:e.archived,projectId:s,date:e.date,description:e.description,refetch:l},Object(ye.a)())}))}),Object(g.jsx)(xe,{}),0===a.length&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{className:"tasks__done"}),Object(g.jsx)("div",{className:"tasks__done-text","data-testid":"task-not-found",children:"All tasks are done! Nice work!"})]})]})},et=function(e){var t=e.userId;return Object(g.jsxs)("section",{className:fe.a.content,"data-testid":"content",children:[Object(g.jsx)(Ke,{userId:t}),Object(g.jsx)($e,{})]})},tt=function(e){var t=e.userId;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(pe,{}),Object(g.jsx)(et,{userId:t})]})},at=function(){var e=Object(o.useSelector)((function(e){return function(e){return e.auth.user||{}}(e)}));return Object(g.jsx)(i.a,{children:Object(g.jsx)("main",{"data-testid":"application",children:Object(g.jsxs)(d.d,{children:[Object(g.jsx)(J,{user:e,loggedInPath:p,path:f,exact:!0,children:Object(g.jsx)(q,{})}),Object(g.jsx)(J,{user:e,loggedInPath:p,path:_,exact:!0,children:Object(g.jsx)(K,{})}),Object(g.jsx)(V,{user:e,path:p,exact:!0,children:Object(g.jsx)(tt,{userId:e.userId})}),Object(g.jsx)(J,{user:e,loggedInPath:p,path:x,exact:!0,children:Object(g.jsx)(z,{})})]})})})},nt=function(){var e=Object(o.useDispatch)();return Object(n.useEffect)((function(){e(D())}),[e]),Object(g.jsx)(at,{})},ct=a(15),st=Object(P.configureStore)({reducer:(W={auth:A,projects:Ae},Object(ct.a)(W,L.reducerPath,L.reducer),Object(ct.a)(W,U.reducerPath,U.reducer),Object(ct.a)(W,Y.reducerPath,Y.reducer),W),middleware:function(e){return e().concat(L.middleware,U.middleware,Y.middleware)}});r.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)(o.Provider,{store:st,children:Object(g.jsx)(nt,{})})}),document.getElementById("root"))}],[[79,1,2]]]);
//# sourceMappingURL=main.23aafeed.chunk.js.map